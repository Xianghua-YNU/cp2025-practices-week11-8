# 亥姆霍兹线圈磁场计算与可视化实验报告

## 1. 实验目的
1.  理解亥姆霍兹线圈原理，实现其磁场计算与可视化。
2.  分析亥姆霍兹线圈中心区域磁场的均匀性。
3.  (可选) 探究非亥姆霍兹线圈配置下的磁场分布。

## 2. 实验原理与方法

**2.1 核心原理:**
*   **单个载流圆环:** 磁场由毕奥-萨伐尔定律计算，对线圈电流元 $Id\mathbf{l}$ 的贡献进行积分。在 $yz$-平面上，主要计算 $B_y$ 和 $B_z$ 分量。
*   **双线圈系统:** 总磁场是两个线圈（半径 $R_1, R_2$，中心分别位于 $z_{c1}=+d/2, z_{c2}=-d/2$）产生磁场的矢量和。
*   **亥姆霍兹条件:** $R_1 = R_2 = R$ 且线圈间距 $d = R$。

**2.2 计算方法:**
*   **数值积分:** 对每个线圈，沿其周长（角度 $\phi'$ 从 $0$ 到 $2\pi$）数值积分（如 `np.trapezoid`）各电流元产生的 $dB_y$ 和 $dB_z$。
*   **叠加:** 将两个线圈在 $yz$-平面网格点上产生的磁场分量矢量相加。
*   **可视化:** 使用 `plt.streamplot` (磁场线) 和可选的 `plt.contourf` (磁感应强度大小)。

**2.3 主要参数:**
*   $\mu_0 = 4\pi \times 10^{-7} \text{ T}\cdot\text{m/A}$, $I = 1.0 \text{ A}$
*   **亥姆霍兹配置:** $R_1 = R_2 = R = [0.5 \text{ m}]$, $d = R = [0.5 \text{ m}]$
*   **(可选) 非亥姆霍兹配置:** $R_1 = [\text{val}]$, $R_2 = [\text{val}]$, $d = [\text{val}]$

## 3. 实验结果

**3.1 亥姆霍兹线圈 ($R_1=R_2=R, d=R$):**

**3.1.1 磁场线图:**

[在此处插入 $yz$-平面磁场线图。图应包含轴标签、标题和线圈位置。]![Image_72495169896145](https://github.com/user-attachments/assets/b698553d-6fa2-43a4-886d-ccf55dee4b13)


**图说明:** (简述磁场线分布特点，尤其关注中心区域的均匀性。)中间密两边疏

[Your brief description]


**3.1.2 (可选) 磁感应强度大小等值线图:**

[在此处插入等值线图。]

**图说明:** (简述磁场强度分布，如何体现中心均匀性。)

[Your brief description]

**3.2 (可选) 非亥姆霍兹线圈:**

[在此处插入非亥姆霍兹配置的磁场线图。]

**图说明:** (与亥姆霍兹配置的主要区别。)

[Your brief description]

## 4. 分析与讨论

**4.1 磁场均匀性 (亥姆霍兹配置):**

(讨论中心区域 ($Y \approx 0, Z \approx 0$) 磁场的均匀性，可参考轴线上 $B_z(0,Z)$ 的变化。是否满足 $dB_z/dZ \approx 0$ 和 $d^2B_z/dZ^2 \approx 0$?)

[Your analysis]
分析：在亥姆霍兹配置中，中心区域（Y \approx 0, Z \approx 0 ）磁场均匀性可通过分析轴线上 B_z(0, Z) 的变化来判断。理论上，当满足 \frac{dB_z}{dZ} \approx 0 时，意味着磁场强度沿 Z 方向的变化率极小，即磁场强度在 Z 方向基本不变；而 \frac{d^2B_z}{dZ^2} \approx 0  表示磁场强度沿 Z 方向变化率的变化率也极小 ，说明磁场在该区域的变化趋势稳定，不会出现急剧的变化。实际计算中，可通过数值微分方法计算这两个导数，若计算结果接近零，则表明中心区域磁场具有较好的均匀性。
**4.2 磁场特点与问题:**

(简述磁场线的总体形态。讨论计算中遇到的问题，如积分点数、网格密度的影响。)

[Your analysis and discussion]
分析与讨论：磁场线总体形态围绕亥姆霍兹线圈呈闭合曲线，在中心区域磁场线近似平行且均匀分布，远离中心区域磁场线逐渐弯曲、发散。计算中，积分点数会影响磁场数值计算的精度，点数过少会导致计算结果粗糙，无法准确捕捉磁场细节；点数过多则会增加计算时间和资源消耗。网格密度在可视化时很关键，网格太稀疏不能很好展示磁场线的变化，太密集可能导致图形过于杂乱。合适的积分点数和网格密度需通过多次试验和误差分析确定 。
**4.3 (可选) 非亥姆霍兹配置影响:**

(参数变化如何影响中心磁场均匀性?)

[Your analysis]
分析：亥姆霍兹配置是通过特定的线圈间距和电流设置来实现中心区域磁场均匀性。当参数如线圈间距、电流大小改变时，中心磁场均匀性会受影响。线圈间距增大，中心区域磁场可能变得不均匀，磁场强度变化梯度增大；电流大小改变会直接影响磁场强度大小，且可能破坏磁场分布的对称性，导致均匀性变差。可通过改变参数进行数值模拟，观察中心区域磁场强度及其导数的变化来定量分析影响程度。
## 5. 结论

(总结主要发现：亥姆霍兹线圈磁场计算与可视化结果，中心区域均匀性特点，以及对磁场分布规律的理解。)

[Your conclusions]
结论：通过对亥姆霍兹线圈磁场的计算与可视化，发现中心区域在标准配置下具有较好的磁场均匀性，满足 \frac{dB_z}{dZ} \approx 0 和 \frac{d^2B_z}{dZ^2} \approx 0  。磁场线形态在中心区域平行均匀，远离中心发散。计算中，积分点数和网格密度对结果精度和可视化效果有显著影响。非亥姆霍兹配置下，参数变化会破坏磁场均匀性。研究加深了对亥姆霍兹线圈磁场分布规律的理解，为相关电磁设备设计和应用提供了理论支持。
## 6. 附录：Python 代码片段
(粘贴核心计算或绘图函数的代码片段。)
```python
# Key code snippets
```
import numpy as np
import matplotlib.pyplot as plt

# 定义常量
mu_0 = 4 * np.pi * 1e-7  # 真空磁导率
R = 0.5  # 线圈半径
I = 1  # 电流
N = 100  # 线圈匝数
d = R  # 线圈间距，标准亥姆霍兹配置

# 计算磁场强度函数
def B_z(Z):
    """计算轴线上Z点处的磁场强度Bz"""
    num1 = (R ** 2 + (Z - d / 2) ** 2)
    num2 = (R ** 2 + (Z + d / 2) ** 2)
    return 0.5 * mu_0 * N * I * R ** 2 * (1 / num1 ** (3 / 2) + 1 / num2 ** (3 / 2))

# 生成Z轴坐标
Z = np.linspace(-1, 1, 1000)
B = B_z(Z)

# 绘制磁场强度随Z的变化曲线
plt.plot(Z, B)
plt.xlabel('Z position')
plt.ylabel('Bz (T)')
plt.title('Magnetic Field of Helmholtz Coils')
plt.show()
